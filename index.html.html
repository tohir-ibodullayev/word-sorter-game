<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Word Sorter â€” Learn English!</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700;800&family=Nunito:wght@600;700;800;900&display=swap" rel="stylesheet">
<style>
/* â”€â”€â”€ RESET & ROOT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:       #0f172a;
  --surface:  #1e293b;
  --surface2: #273548;
  --accent:   #38bdf8;
  --left-clr: #6366f1;
  --right-clr:#f43f5e;
  --correct:  #22c55e;
  --wrong:    #ef4444;
  --gold:     #fbbf24;
  --text:     #f1f5f9;
  --subtext:  #94a3b8;
  --radius:   18px;
  --card-r:   24px;
}

html, body {
  width: 100%; height: 100%;
  overflow: hidden;
  font-family: 'Nunito', sans-serif;
  background: var(--bg);
  color: var(--text);
  touch-action: pan-y;
}

/* â”€â”€â”€ SCREENS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.screen {
  position: fixed; inset: 0;
  display: none;
  flex-direction: column;
  align-items: center;
  overflow: hidden;
}
.screen.active { display: flex; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TITLE SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#title-screen {
  background: radial-gradient(ellipse at 30% 20%, #1a2a4a 0%, #0f172a 70%);
  justify-content: center;
  gap: clamp(12px, 2.5vh, 22px);
  padding: 24px 20px;
  overflow-y: auto;
}

.blob {
  position: absolute; border-radius: 50%;
  filter: blur(80px); opacity: 0.22;
  pointer-events: none; z-index: 0;
}
.blob1 { width: 380px; height: 380px; background: #6366f1; top: -120px; left: -120px; }
.blob2 { width: 320px; height: 320px; background: #f43f5e; bottom: -80px; right: -80px; }
.blob3 { width: 200px; height: 200px; background: #38bdf8; top: 42%; left: 50%; transform: translate(-50%,-50%); }

.title-mascot {
  font-size: clamp(56px, 14vw, 100px);
  animation: float 3s ease-in-out infinite;
  position: relative; z-index: 1;
}

.title-logo {
  font-family: 'Baloo 2', cursive;
  font-size: clamp(34px, 9vw, 68px);
  font-weight: 800;
  background: linear-gradient(135deg, var(--accent), var(--gold));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  background-clip: text;
  text-align: center; line-height: 1;
  position: relative; z-index: 1;
}

.title-tagline {
  font-size: clamp(13px, 2.8vw, 17px);
  font-weight: 700; color: var(--subtext);
  text-align: center;
  position: relative; z-index: 1;
}

.category-pills {
  display: flex; flex-wrap: wrap; gap: 6px;
  justify-content: center;
  max-width: 500px;
  position: relative; z-index: 1;
}

.pill {
  background: var(--surface2);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 999px;
  padding: 4px 12px;
  font-size: clamp(10px, 2.2vw, 13px);
  font-weight: 700; color: var(--subtext);
}

.how-to-play {
  display: flex; gap: clamp(8px, 2.5vw, 16px);
  position: relative; z-index: 1;
  flex-wrap: wrap; justify-content: center;
}

.how-step {
  display: flex; flex-direction: column; align-items: center; gap: 5px;
  background: var(--surface2);
  border-radius: var(--radius);
  padding: clamp(10px, 2vw, 14px) clamp(12px, 2.5vw, 20px);
  border: 1px solid rgba(255,255,255,0.07);
}
.how-step-icon { font-size: clamp(20px, 5vw, 30px); }
.how-step-text { font-size: clamp(10px, 2vw, 12px); font-weight: 700; color: var(--subtext); text-align: center; }

.btn-start {
  font-family: 'Baloo 2', cursive;
  font-size: clamp(20px, 4.5vw, 26px);
  font-weight: 800;
  background: linear-gradient(135deg, var(--accent), #0284c7);
  color: #fff; border: none;
  border-radius: 999px;
  padding: clamp(13px, 2.5vw, 17px) clamp(40px, 9vw, 72px);
  cursor: pointer;
  box-shadow: 0 8px 28px rgba(56,189,248,0.35);
  transition: transform 0.15s, box-shadow 0.15s;
  position: relative; z-index: 1;
}
.btn-start:hover  { transform: translateY(-3px) scale(1.03); box-shadow: 0 14px 36px rgba(56,189,248,0.45); }
.btn-start:active { transform: translateY(1px) scale(0.97); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GAME SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#game-screen {
  background: var(--bg);
  justify-content: flex-start;
}

/* HUD */
.hud {
  width: 100%;
  display: flex; align-items: center; justify-content: space-between;
  padding: clamp(10px, 2.2vw, 14px) clamp(14px, 3.5vw, 24px);
  background: var(--surface);
  border-bottom: 1px solid rgba(255,255,255,0.07);
  gap: 10px; flex-shrink: 0; z-index: 10;
}

.hud-stat { display: flex; flex-direction: column; align-items: center; gap: 1px; min-width: 52px; }
.hud-label { font-size: clamp(9px, 1.7vw, 11px); font-weight: 800; color: var(--subtext); letter-spacing: 1px; text-transform: uppercase; }
.hud-value { font-family: 'Baloo 2', cursive; font-size: clamp(18px, 4.5vw, 28px); font-weight: 800; color: var(--text); }
.hud-score { color: var(--gold) !important; }

.hud-progress { flex: 1; display: flex; flex-direction: column; gap: 4px; align-items: center; }
.hud-round-label { font-size: clamp(9px, 1.7vw, 11px); font-weight: 800; color: var(--subtext); letter-spacing: 1px; text-transform: uppercase; }
.prog-track { width: 100%; height: clamp(8px, 1.5vw, 11px); background: var(--surface2); border-radius: 99px; overflow: hidden; }
.prog-fill  { height: 100%; border-radius: 99px; background: linear-gradient(90deg, var(--accent), var(--correct)); transition: width 0.4s cubic-bezier(0.34,1.56,0.64,1); }

/* TIMER */
.timer-track { width: 100%; height: clamp(5px, 1vw, 7px); background: var(--surface2); flex-shrink: 0; }
.timer-fill  { height: 100%; background: var(--correct); transition: width 0.1s linear, background 0.4s; }

/* GAME BODY â€” flex column, evenly spaced */
.game-body {
  flex: 1; width: 100%;
  max-width: 640px;
  margin: 0 auto;
  display: flex; flex-direction: column;
  align-items: center;
  justify-content: space-evenly;
  padding: clamp(8px, 2vh, 18px) clamp(16px, 4vw, 28px);
  position: relative;
  overflow: hidden;
}

.question-label {
  font-size: clamp(12px, 2.4vw, 15px);
  font-weight: 800; color: var(--subtext);
  letter-spacing: 1px; text-transform: uppercase; text-align: center;
}

/* ITEM STAGE */
.item-stage {
  display: flex; flex-direction: column; align-items: center; gap: 8px;
  position: relative;
}

.item-emoji-wrap {
  width: clamp(100px, 22vw, 160px);
  height: clamp(100px, 22vw, 160px);
  background: var(--surface);
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  box-shadow: 0 0 0 4px var(--surface2), 0 10px 36px rgba(0,0,0,0.4);
  animation: itemBob 1.2s ease-in-out infinite;
  position: relative;
}

.item-emoji { font-size: clamp(60px, 14vw, 110px); line-height: 1; display: block; }

.item-badge {
  position: absolute; bottom: -6px; right: -6px;
  background: var(--gold); color: #000;
  font-size: clamp(9px, 1.8vw, 12px); font-weight: 900;
  border-radius: 999px; padding: 2px 9px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  text-transform: uppercase; letter-spacing: 0.5px;
}

/* SWIPE HINTS */
.swipe-hints {
  display: flex; align-items: center; gap: clamp(8px, 2.5vw, 18px);
  color: var(--subtext);
}
.swipe-arrow { font-size: clamp(18px, 4vw, 26px); opacity: 0.38; transition: opacity 0.2s, transform 0.2s; }
.swipe-arrow.active { opacity: 1; transform: scale(1.3); }
.swipe-hint-text { font-size: clamp(10px, 2vw, 13px); font-weight: 700; color: var(--subtext); }

/* CHOICE BUTTONS â€” big, centered, side by side */
.choices {
  display: flex;
  gap: clamp(10px, 3vw, 18px);
  width: 100%;
  justify-content: center;
}

.choice-btn {
  flex: 1;
  max-width: clamp(130px, 38vw, 230px);
  padding: clamp(18px, 4vw, 26px) clamp(8px, 2vw, 14px);
  border-radius: var(--card-r);
  border: 3px solid transparent;
  background: var(--surface);
  cursor: pointer;
  font-family: 'Baloo 2', cursive;
  font-size: clamp(16px, 4vw, 24px);
  font-weight: 800; color: var(--text);
  text-align: center;
  transition: transform 0.12s, box-shadow 0.12s, background 0.15s;
  box-shadow: 0 4px 18px rgba(0,0,0,0.25);
  word-break: break-word; line-height: 1.2;
  position: relative; overflow: hidden;
}
.choice-btn .choice-side-label {
  display: block;
  font-size: clamp(9px, 1.8vw, 11px); font-weight: 800; color: var(--subtext);
  letter-spacing: 1px; text-transform: uppercase; margin-bottom: 4px;
}
.choice-btn.left-btn  { border-color: var(--left-clr);  background: rgba(99,102,241,0.12); }
.choice-btn.right-btn { border-color: var(--right-clr); background: rgba(244,63,94,0.12); }
.choice-btn:hover { transform: translateY(-4px) scale(1.02); box-shadow: 0 10px 28px rgba(0,0,0,0.35); }
.choice-btn:active { transform: scale(0.96); }
.choice-btn:disabled { cursor: default; }

.choice-btn.flash-correct { background: var(--correct) !important; border-color: var(--correct) !important; animation: flashPop 0.4s ease; }
.choice-btn.flash-wrong   { background: var(--wrong)   !important; border-color: var(--wrong)   !important; animation: shake    0.4s ease; }

/* FEEDBACK TOAST */
.feedback-toast {
  position: absolute; top: 14%;
  left: 50%; transform: translateX(-50%) translateY(-16px) scale(0.7);
  background: var(--surface);
  border-radius: var(--card-r);
  padding: clamp(9px, 2vw, 13px) clamp(18px, 4.5vw, 32px);
  font-family: 'Baloo 2', cursive;
  font-size: clamp(16px, 4.5vw, 26px); font-weight: 800;
  white-space: nowrap;
  box-shadow: 0 8px 28px rgba(0,0,0,0.4);
  opacity: 0;
  transition: all 0.25s cubic-bezier(0.34,1.56,0.64,1);
  z-index: 20; pointer-events: none;
  border: 2px solid transparent;
}
.feedback-toast.show { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); }
.feedback-toast.correct { border-color: var(--correct); color: var(--correct); }
.feedback-toast.wrong   { border-color: var(--wrong);   color: var(--wrong); }
.feedback-toast.timeout { border-color: var(--gold);    color: var(--gold); }

/* DIR OVERLAYS */
.dir-overlay {
  position: absolute; inset: 0;
  pointer-events: none; z-index: 5;
  opacity: 0; transition: opacity 0.15s;
  display: flex; align-items: center;
}
.dir-overlay.left-ov  { background: linear-gradient(90deg,  rgba(99,102,241,0.25), transparent); justify-content: flex-start; padding-left: 20px; }
.dir-overlay.right-ov { background: linear-gradient(-90deg, rgba(244,63,94,0.25),  transparent); justify-content: flex-end;   padding-right: 20px; }
.dir-overlay-icon { font-size: clamp(32px, 9vw, 56px); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESULTS SCREEN â€” scrollable
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#results-screen {
  background: var(--bg);
  overflow-y: auto;
  overflow-x: hidden;
  justify-content: flex-start;
  -webkit-overflow-scrolling: touch;
  touch-action: pan-y;
}

.results-inner {
  width: 100%; max-width: 680px;
  margin: 0 auto;
  display: flex; flex-direction: column;
  align-items: center;
  gap: clamp(12px, 2.8vh, 20px);
  padding: clamp(18px, 4vw, 32px) clamp(14px, 4vw, 28px) clamp(28px, 6vh, 52px);
}

.results-banner {
  width: 100%;
  background: linear-gradient(135deg, var(--surface), var(--surface2));
  border-radius: var(--card-r);
  padding: clamp(16px, 3.5vw, 26px);
  display: flex; flex-direction: column; align-items: center; gap: 7px;
  border: 1px solid rgba(255,255,255,0.08);
}
.results-emoji { font-size: clamp(44px, 11vw, 72px); }
.results-title {
  font-family: 'Baloo 2', cursive;
  font-size: clamp(22px, 5.5vw, 36px); font-weight: 800;
  background: linear-gradient(135deg, var(--gold), #fb923c);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  text-align: center;
}
.stars { display: flex; gap: 5px; font-size: clamp(26px, 6.5vw, 40px); }

.score-row { display: flex; gap: clamp(8px, 2.5vw, 16px); width: 100%; justify-content: center; }
.score-tile {
  flex: 1; max-width: 150px;
  background: var(--surface2);
  border-radius: var(--radius);
  padding: clamp(10px, 2.2vw, 16px);
  display: flex; flex-direction: column; align-items: center; gap: 3px;
  border: 1px solid rgba(255,255,255,0.07);
}
.score-tile-num {
  font-family: 'Baloo 2', cursive;
  font-size: clamp(26px, 6.5vw, 44px); font-weight: 800; line-height: 1;
}
.score-tile-num.gold  { color: var(--gold); }
.score-tile-num.green { color: var(--correct); }
.score-tile-num.blue  { color: var(--accent); }
.score-tile-label { font-size: clamp(9px, 1.9vw, 11px); font-weight: 800; color: var(--subtext); text-transform: uppercase; letter-spacing: 1px; }

.vocab-section-title {
  font-size: clamp(12px, 2.4vw, 15px); font-weight: 800;
  color: var(--subtext); text-transform: uppercase; letter-spacing: 1px;
  align-self: flex-start;
}

/* 2 columns Ã— 5 rows = 10 cards, no scroll needed */
.vocab-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: clamp(7px, 1.8vw, 12px);
  width: 100%;
}

.vocab-card {
  background: var(--surface);
  border-radius: var(--radius);
  padding: clamp(9px, 2vw, 13px) clamp(9px, 2.2vw, 14px);
  display: flex; align-items: center;
  gap: clamp(7px, 1.8vw, 11px);
  border: 2px solid var(--surface2);
  animation: cardReveal 0.4s ease both;
}
.vocab-card.v-correct { border-color: rgba(34,197,94,0.5); }
.vocab-card.v-wrong   { border-color: rgba(239,68,68,0.42); }

.vocab-card-emoji { font-size: clamp(24px, 5.5vw, 36px); flex-shrink: 0; }
.vocab-card-info  { flex: 1; min-width: 0; }
.vocab-card-name {
  font-family: 'Baloo 2', cursive;
  font-size: clamp(12px, 2.8vw, 17px); font-weight: 800; color: var(--text);
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.vocab-card-cat { font-size: clamp(8px, 1.7vw, 10px); font-weight: 700; color: var(--subtext); text-transform: uppercase; letter-spacing: 0.8px; }
.vocab-card-result { font-size: clamp(16px, 3.8vw, 22px); flex-shrink: 0; }

.btn-play-again {
  width: 100%; max-width: 380px;
  font-family: 'Baloo 2', cursive;
  font-size: clamp(17px, 4vw, 23px); font-weight: 800;
  background: linear-gradient(135deg, var(--accent), #0284c7);
  color: #fff; border: none;
  border-radius: 999px;
  padding: clamp(13px, 2.8vw, 17px);
  cursor: pointer;
  box-shadow: 0 6px 22px rgba(56,189,248,0.3);
  transition: transform 0.15s, box-shadow 0.15s;
}
.btn-play-again:hover  { transform: translateY(-3px); box-shadow: 0 12px 32px rgba(56,189,248,0.42); }
.btn-play-again:active { transform: translateY(1px); }

/* â”€â”€â”€ KEYFRAMES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@keyframes float    { 0%,100%{transform:translateY(0) rotate(-4deg)} 50%{transform:translateY(-13px) rotate(4deg)} }
@keyframes itemBob  { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-7px)} }
@keyframes flashPop { 0%{transform:scale(1)} 40%{transform:scale(1.1)} 100%{transform:scale(1)} }
@keyframes shake    { 0%,100%{transform:translateX(0)} 20%{transform:translateX(-10px)} 60%{transform:translateX(10px)} }
@keyframes throwLeft  { to{transform:translate(-220%,-60px) rotate(-45deg);opacity:0} }
@keyframes throwRight { to{transform:translate( 220%,-60px) rotate( 45deg);opacity:0} }
@keyframes fallDown   { to{transform:translateY(260px);opacity:0} }
@keyframes cardReveal { from{opacity:0;transform:translateY(14px)} to{opacity:1;transform:translateY(0)} }
@keyframes itemIn     { from{opacity:0;transform:scale(0.45) translateY(28px)} to{opacity:1;transform:scale(1) translateY(0)} }

.anim-throw-left  { animation: throwLeft  0.44s ease-in forwards !important; }
.anim-throw-right { animation: throwRight 0.44s ease-in forwards !important; }
.anim-fall        { animation: fallDown   0.44s ease-in forwards !important; }
.anim-in          { animation: itemIn     0.34s cubic-bezier(0.34,1.56,0.64,1) both; }

/* â”€â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media (max-width: 360px) {
  .choice-btn { padding: 14px 6px; font-size: 15px; }
}
@media (min-width: 768px) {
  .game-body, .hud { max-width: 660px; margin-left: auto; margin-right: auto; }
}
/* Landscape on short screens */
@media (orientation: landscape) and (max-height: 480px) {
  .item-emoji-wrap { width: 80px; height: 80px; }
  .item-emoji { font-size: 52px; }
  .game-body { flex-direction: row; flex-wrap: wrap; justify-content: space-evenly; padding: 6px 16px; }
  .question-label { width: 100%; margin-bottom: 0; }
  .item-stage { flex: 0 0 auto; }
  .choices { flex: 1; min-width: 200px; }
  .swipe-hints { display: none; }
}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â• TITLE SCREEN â•â•â•â•â•â•â• -->
<div id="title-screen" class="screen active">
  <div class="blob blob1"></div>
  <div class="blob blob2"></div>
  <div class="blob blob3"></div>

  <div class="title-mascot">ğŸ¦‰</div>
  <div class="title-logo">Word Sorter!</div>
  <div class="title-tagline">See the picture Â· Pick the right English word Â· Score points!</div>

  <div class="category-pills" id="cat-pills"></div>

  <div class="how-to-play">
    <div class="how-step">
      <div class="how-step-icon">ğŸ‘€</div>
      <div class="how-step-text">Look at<br>the picture</div>
    </div>
    <div class="how-step">
      <div class="how-step-icon">ğŸ‘ˆğŸ‘‰</div>
      <div class="how-step-text">Swipe or<br>tap a word</div>
    </div>
    <div class="how-step">
      <div class="how-step-icon">â­</div>
      <div class="how-step-text">Earn<br>points!</div>
    </div>
  </div>

  <button class="btn-start" onclick="startGame()">â–¶ Start Game</button>
</div>

<!-- â•â•â•â•â•â•â• GAME SCREEN â•â•â•â•â•â•â• -->
<div id="game-screen" class="screen">
  <div class="hud">
    <div class="hud-stat">
      <div class="hud-label">Score</div>
      <div class="hud-value hud-score" id="hud-score">0</div>
    </div>
    <div class="hud-progress">
      <div class="hud-round-label" id="hud-round-label">Word 1 of 10</div>
      <div class="prog-track"><div class="prog-fill" id="prog-fill" style="width:0%"></div></div>
    </div>
    <div class="hud-stat">
      <div class="hud-label">Streak</div>
      <div class="hud-value" id="hud-streak">0</div>
    </div>
  </div>
  <div class="timer-track"><div class="timer-fill" id="timer-fill" style="width:100%"></div></div>

  <!-- Swipe overlays -->
  <div class="dir-overlay left-ov"  id="dir-left"><div class="dir-overlay-icon">ğŸ‘ˆ</div></div>
  <div class="dir-overlay right-ov" id="dir-right"><div class="dir-overlay-icon">ğŸ‘‰</div></div>

  <div class="game-body" id="game-body">
    <div class="question-label">What is this? ğŸ¤”</div>

    <div class="item-stage">
      <div class="item-emoji-wrap" id="item-emoji-wrap">
        <span class="item-emoji" id="item-emoji">ğŸ</span>
      </div>
      <div class="item-badge" id="item-badge">Fruit</div>
    </div>

    <div class="swipe-hints">
      <span class="swipe-arrow" id="arrow-left">â—€</span>
      <span class="swipe-hint-text">swipe or tap</span>
      <span class="swipe-arrow" id="arrow-right">â–¶</span>
    </div>

    <div class="choices">
      <button class="choice-btn left-btn" id="choice-left" onclick="choose('left')">
        <span class="choice-side-label">â† Choice A</span>
        <span id="left-word">banana</span>
      </button>
      <button class="choice-btn right-btn" id="choice-right" onclick="choose('right')">
        <span class="choice-side-label">Choice B â†’</span>
        <span id="right-word">orange</span>
      </button>
    </div>
  </div>

  <div class="feedback-toast" id="feedback-toast">âœ… Correct!</div>
</div>

<!-- â•â•â•â•â•â•â• RESULTS SCREEN â•â•â•â•â•â•â• -->
<div id="results-screen" class="screen">
  <div class="results-inner">
    <div class="results-banner">
      <div class="results-emoji" id="results-emoji">ğŸ‰</div>
      <div class="results-title" id="results-title">Round Complete!</div>
      <div class="stars" id="stars-row">â­â­â­</div>
    </div>

    <div class="score-row">
      <div class="score-tile">
        <div class="score-tile-num gold"  id="final-score">0</div>
        <div class="score-tile-label">Points</div>
      </div>
      <div class="score-tile">
        <div class="score-tile-num green" id="final-correct">0/10</div>
        <div class="score-tile-label">Correct</div>
      </div>
      <div class="score-tile">
        <div class="score-tile-num blue"  id="final-streak">0</div>
        <div class="score-tile-label">Best Streak</div>
      </div>
    </div>

    <div class="vocab-section-title">ğŸ“š Words This Round</div>
    <div class="vocab-grid" id="vocab-grid"></div>

    <button class="btn-play-again" onclick="startGame()">ğŸ”„ Play Again!</button>
  </div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DATABASE â€” 150 words, 10 categories, ages 9-14 friendly
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const DB = [
  /* FRUITS â€” 15 */
  {e:'ğŸ',n:'apple',       c:'Fruit'},{e:'ğŸŒ',n:'banana',      c:'Fruit'},
  {e:'ğŸŠ',n:'orange',      c:'Fruit'},{e:'ğŸ‡',n:'grapes',       c:'Fruit'},
  {e:'ğŸ“',n:'strawberry',  c:'Fruit'},{e:'ğŸ‰',n:'watermelon',   c:'Fruit'},
  {e:'ğŸ‹',n:'lemon',       c:'Fruit'},{e:'ğŸ‘',n:'peach',        c:'Fruit'},
  {e:'ğŸ’',n:'cherry',      c:'Fruit'},{e:'ğŸ¥­',n:'mango',        c:'Fruit'},
  {e:'ğŸ',n:'pineapple',   c:'Fruit'},{e:'ğŸ¥',n:'kiwi',         c:'Fruit'},
  {e:'ğŸ',n:'pear',        c:'Fruit'},{e:'ğŸ«',n:'blueberry',    c:'Fruit'},
  {e:'ğŸ¥¥',n:'coconut',     c:'Fruit'},

  /* VEGETABLES â€” 15 */
  {e:'ğŸ¥•',n:'carrot',      c:'Vegetable'},{e:'ğŸ¥¦',n:'broccoli',    c:'Vegetable'},
  {e:'ğŸŒ½',n:'corn',        c:'Vegetable'},{e:'ğŸ§…',n:'onion',        c:'Vegetable'},
  {e:'ğŸ¥”',n:'potato',      c:'Vegetable'},{e:'ğŸ¥’',n:'cucumber',     c:'Vegetable'},
  {e:'ğŸ«‘',n:'pepper',      c:'Vegetable'},{e:'ğŸ§„',n:'garlic',       c:'Vegetable'},
  {e:'ğŸ¥¬',n:'lettuce',     c:'Vegetable'},{e:'ğŸ„',n:'mushroom',     c:'Vegetable'},
  {e:'ğŸŒ¶ï¸',n:'chili',       c:'Vegetable'},{e:'ğŸ«˜',n:'beans',        c:'Vegetable'},
  {e:'ğŸ…',n:'tomato',      c:'Vegetable'},{e:'ğŸ¥‘',n:'avocado',      c:'Vegetable'},
  {e:'ğŸ«š',n:'olive oil',   c:'Vegetable'},

  /* ANIMALS â€” 20 */
  {e:'ğŸ¶',n:'dog',         c:'Animal'},{e:'ğŸ±',n:'cat',          c:'Animal'},
  {e:'ğŸ¸',n:'frog',        c:'Animal'},{e:'ğŸ˜',n:'elephant',     c:'Animal'},
  {e:'ğŸ¦',n:'lion',        c:'Animal'},{e:'ğŸŸ',n:'fish',         c:'Animal'},
  {e:'ğŸ”',n:'chicken',     c:'Animal'},{e:'ğŸ°',n:'rabbit',       c:'Animal'},
  {e:'ğŸ¦Š',n:'fox',         c:'Animal'},{e:'ğŸ»',n:'bear',         c:'Animal'},
  {e:'ğŸ¼',n:'panda',       c:'Animal'},{e:'ğŸ§',n:'penguin',      c:'Animal'},
  {e:'ğŸ¦‹',n:'butterfly',   c:'Animal'},{e:'ğŸ¢',n:'turtle',       c:'Animal'},
  {e:'ğŸ¦’',n:'giraffe',     c:'Animal'},{e:'ğŸ¬',n:'dolphin',      c:'Animal'},
  {e:'ğŸ¦…',n:'eagle',       c:'Animal'},{e:'ğŸ¦†',n:'duck',         c:'Animal'},
  {e:'ğŸ',n:'snake',       c:'Animal'},{e:'ğŸ¦“',n:'zebra',        c:'Animal'},

  /* FOOD â€” 15 */
  {e:'ğŸ•',n:'pizza',       c:'Food'},{e:'ğŸ¦',n:'ice cream',    c:'Food'},
  {e:'ğŸ°',n:'cake',        c:'Food'},{e:'ğŸ”',n:'burger',       c:'Food'},
  {e:'ğŸŒ®',n:'taco',        c:'Food'},{e:'ğŸœ',n:'noodles',      c:'Food'},
  {e:'ğŸ£',n:'sushi',       c:'Food'},{e:'ğŸ¥ª',n:'sandwich',     c:'Food'},
  {e:'ğŸ©',n:'donut',       c:'Food'},{e:'ğŸª',n:'cookie',       c:'Food'},
  {e:'ğŸ¥—',n:'salad',       c:'Food'},{e:'ğŸ¿',n:'popcorn',      c:'Food'},
  {e:'ğŸ§',n:'cupcake',     c:'Food'},{e:'ğŸ¥',n:'pancakes',     c:'Food'},
  {e:'ğŸ±',n:'lunchbox',    c:'Food'},

  /* VEHICLES â€” 15 */
  {e:'ğŸš—',n:'car',         c:'Vehicle'},{e:'âœˆï¸',n:'airplane',    c:'Vehicle'},
  {e:'ğŸš‚',n:'train',       c:'Vehicle'},{e:'ğŸš¢',n:'ship',        c:'Vehicle'},
  {e:'ğŸš',n:'helicopter',  c:'Vehicle'},{e:'ğŸš²',n:'bicycle',     c:'Vehicle'},
  {e:'ğŸï¸',n:'motorcycle',  c:'Vehicle'},{e:'ğŸšŒ',n:'bus',         c:'Vehicle'},
  {e:'ğŸš€',n:'rocket',      c:'Vehicle'},{e:'â›µ',n:'sailboat',    c:'Vehicle'},
  {e:'ğŸš‘',n:'ambulance',   c:'Vehicle'},{e:'ğŸš’',n:'fire truck',  c:'Vehicle'},
  {e:'ğŸ›»',n:'pickup truck',c:'Vehicle'},{e:'ğŸšœ',n:'tractor',     c:'Vehicle'},
  {e:'ğŸ›¶',n:'canoe',       c:'Vehicle'},

  /* CLOTHES â€” 15 */
  {e:'ğŸ‘•',n:'t-shirt',     c:'Clothes'},{e:'ğŸ‘–',n:'jeans',       c:'Clothes'},
  {e:'ğŸ‘—',n:'dress',       c:'Clothes'},{e:'ğŸ§¥',n:'coat',        c:'Clothes'},
  {e:'ğŸ§£',n:'scarf',       c:'Clothes'},{e:'ğŸ§¤',n:'gloves',      c:'Clothes'},
  {e:'ğŸ§¢',n:'cap',         c:'Clothes'},{e:'ğŸ‘’',n:'hat',         c:'Clothes'},
  {e:'ğŸ‘Ÿ',n:'sneakers',    c:'Clothes'},{e:'ğŸ¥¾',n:'boots',       c:'Clothes'},
  {e:'ğŸ©±',n:'swimsuit',    c:'Clothes'},{e:'ğŸ§¦',n:'socks',       c:'Clothes'},
  {e:'ğŸ‘”',n:'shirt',       c:'Clothes'},{e:'ğŸ©³',n:'shorts',      c:'Clothes'},
  {e:'ğŸ§¤',n:'mittens',     c:'Clothes'},

  /* SCHOOL â€” 15 */
  {e:'ğŸ“š',n:'books',       c:'School'},{e:'âœï¸',n:'pencil',      c:'School'},
  {e:'ğŸ“',n:'ruler',       c:'School'},{e:'ğŸ”¬',n:'microscope',  c:'School'},
  {e:'ğŸ–Šï¸',n:'pen',         c:'School'},{e:'ğŸ“',n:'set square',  c:'School'},
  {e:'ğŸ—‚ï¸',n:'folder',      c:'School'},{e:'ğŸ’»',n:'laptop',      c:'School'},
  {e:'ğŸ–ï¸',n:'crayon',      c:'School'},{e:'ğŸ““',n:'notebook',    c:'School'},
  {e:'ğŸ”­',n:'telescope',   c:'School'},{e:'ğŸ’',n:'backpack',    c:'School'},
  {e:'ğŸ—‘ï¸',n:'bin',         c:'School'},{e:'ğŸ“Œ',n:'pin',         c:'School'},
  {e:'ğŸ”‹',n:'battery',     c:'School'},

  /* SPORTS â€” 15 */
  {e:'âš½',n:'football',    c:'Sports'},{e:'ğŸ€',n:'basketball',  c:'Sports'},
  {e:'ğŸ¾',n:'tennis',      c:'Sports'},{e:'ğŸŠ',n:'swimming',    c:'Sports'},
  {e:'ğŸš´',n:'cycling',     c:'Sports'},{e:'â›·ï¸',n:'skiing',      c:'Sports'},
  {e:'ğŸ³',n:'bowling',     c:'Sports'},{e:'ğŸ‹ï¸',n:'weightlifting',c:'Sports'},
  {e:'ğŸ¤¸',n:'gymnastics',  c:'Sports'},{e:'ğŸˆ',n:'american football',c:'Sports'},
  {e:'âš¾',n:'baseball',    c:'Sports'},{e:'ğŸ',n:'volleyball',  c:'Sports'},
  {e:'ğŸ¥Š',n:'boxing',      c:'Sports'},{e:'ğŸ“',n:'ping pong',   c:'Sports'},
  {e:'ğŸ¸',n:'badminton',   c:'Sports'},

  /* NATURE â€” 15 */
  {e:'ğŸŒº',n:'flower',      c:'Nature'},{e:'ğŸŒ²',n:'tree',        c:'Nature'},
  {e:'ğŸŒŠ',n:'wave',        c:'Nature'},{e:'â›°ï¸',n:'mountain',    c:'Nature'},
  {e:'ğŸŒˆ',n:'rainbow',     c:'Nature'},{e:'âš¡',n:'lightning',   c:'Nature'},
  {e:'â„ï¸',n:'snowflake',   c:'Nature'},{e:'ğŸŒ™',n:'moon',        c:'Nature'},
  {e:'â˜€ï¸',n:'sun',         c:'Nature'},{e:'ğŸŒ‹',n:'volcano',     c:'Nature'},
  {e:'ğŸ‚',n:'autumn leaf', c:'Nature'},{e:'ğŸŒµ',n:'cactus',      c:'Nature'},
  {e:'ğŸŒŠ',n:'ocean',       c:'Nature'},{e:'ğŸŒ¾',n:'wheat',       c:'Nature'},
  {e:'ğŸª¨',n:'rock',        c:'Nature'},

  /* HOME â€” 15 */
  {e:'ğŸ›‹ï¸',n:'sofa',        c:'Home'},{e:'ğŸª‘',n:'chair',       c:'Home'},
  {e:'ğŸ›ï¸',n:'bed',         c:'Home'},{e:'ğŸš¿',n:'shower',      c:'Home'},
  {e:'ğŸ›',n:'bathtub',     c:'Home'},{e:'ğŸª',n:'mirror',      c:'Home'},
  {e:'ğŸ“º',n:'television',  c:'Home'},{e:'ğŸ“±',n:'phone',       c:'Home'},
  {e:'ğŸ’¡',n:'lightbulb',   c:'Home'},{e:'ğŸ”‘',n:'key',         c:'Home'},
  {e:'ğŸ§¹',n:'broom',       c:'Home'},{e:'ğŸª´',n:'plant pot',   c:'Home'},
  {e:'ğŸ•¯ï¸',n:'candle',      c:'Home'},{e:'ğŸšª',n:'door',        c:'Home'},
  {e:'ğŸªŸ',n:'window',      c:'Home'},
];

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const ROUND_SIZE = 10;
const ITEM_TIME  = 7000;

let queue, current, correctSide;
let score, streak, bestStreak, itemsDone, results;
let timerRaf, timerStart, accepting;

let touchStartX = null, touchStartY = null;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT â€” populate category pills
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
(function init() {
  const cats  = [...new Set(DB.map(d => d.c))];
  const pills = document.getElementById('cat-pills');
  cats.forEach(c => {
    const p = document.createElement('div');
    p.className = 'pill'; p.textContent = c;
    pills.appendChild(p);
  });
})();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN UTIL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  if (id === 'results-screen') document.getElementById('results-screen').scrollTop = 0;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   START GAME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function startGame() {
  score = streak = bestStreak = itemsDone = 0;
  results   = [];
  queue     = shuffle(DB).slice(0, ROUND_SIZE);
  accepting = false;
  updateHUD();
  showScreen('game-screen');
  setTimeout(nextItem, 320);
}

function shuffle(a) {
  const arr = [...a];
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HUD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function updateHUD() {
  document.getElementById('hud-score').textContent      = score;
  document.getElementById('hud-streak').textContent     = streak > 1 ? `ğŸ”¥${streak}` : streak;
  document.getElementById('hud-round-label').textContent = `Word ${Math.min(itemsDone+1,ROUND_SIZE)} of ${ROUND_SIZE}`;
  document.getElementById('prog-fill').style.width      = (itemsDone / ROUND_SIZE * 100) + '%';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NEXT ITEM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function nextItem() {
  if (!queue.length) { endRound(); return; }

  current = queue.shift();

  // Pick decoy: prefer same category for harder challenge, fallback to any
  const sameCat = DB.filter(d => d.c === current.c && d.n !== current.n);
  const anyPool = DB.filter(d => d.n !== current.n);
  const pool    = sameCat.length >= 1 ? sameCat : anyPool;
  const decoy   = pool[Math.floor(Math.random() * pool.length)];

  correctSide = Math.random() < 0.5 ? 'left' : 'right';

  document.getElementById('left-word').textContent  = correctSide === 'left'  ? current.n : decoy.n;
  document.getElementById('right-word').textContent = correctSide === 'right' ? current.n : decoy.n;

  // Show ONLY emoji (category as badge hint)
  const wrap = document.getElementById('item-emoji-wrap');
  wrap.className = 'item-emoji-wrap anim-in';
  document.getElementById('item-emoji').textContent = current.e;
  document.getElementById('item-badge').textContent = current.c;

  // Reset buttons
  ['choice-left','choice-right'].forEach(id => {
    const el = document.getElementById(id);
    el.className = el.id === 'choice-left' ? 'choice-btn left-btn' : 'choice-btn right-btn';
    el.disabled = false;
  });

  accepting = true;
  updateHUD();
  startTimer();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TIMER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function startTimer() {
  cancelAnimationFrame(timerRaf);
  timerStart = performance.now();
  const bar  = document.getElementById('timer-fill');

  (function tick(now) {
    const pct = Math.max(0, 1 - (now - timerStart) / ITEM_TIME);
    bar.style.width      = (pct * 100) + '%';
    bar.style.background = pct > 0.5 ? 'var(--correct)' : pct > 0.25 ? 'var(--gold)' : 'var(--wrong)';
    if (pct <= 0) { timeOut(); return; }
    timerRaf = requestAnimationFrame(tick);
  })(timerStart);
}

function stopTimer() { cancelAnimationFrame(timerRaf); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TIMEOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function timeOut() {
  if (!accepting) return;
  accepting = false; stopTimer();
  streak = 0;
  results.push({ item: current, correct: false, timeout: true });
  itemsDone++;
  showFeedback('â° Time\'s up!', 'timeout');
  animateItem('fall');
  setTimeout(nextItem, 1050);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CHOOSE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function choose(side) {
  if (!accepting) return;
  accepting = false; stopTimer();

  const ok = side === correctSide;
  results.push({ item: current, correct: ok, timeout: false });
  itemsDone++;

  document.getElementById('choice-left').disabled  = true;
  document.getElementById('choice-right').disabled = true;

  if (ok) {
    const bonus = Math.round((1 - (performance.now() - timerStart) / ITEM_TIME) * 150);
    const pts   = 100 + Math.max(0, bonus);
    score += pts;
    streak++;
    if (streak > bestStreak) bestStreak = streak;
    document.getElementById('choice-' + side).classList.add('flash-correct');
    showFeedback(`âœ… +${pts}${streak > 1 ? '  ğŸ”¥Ã—'+streak : ''}`, 'correct');
    animateItem(side === 'left' ? 'throw-left' : 'throw-right');
  } else {
    streak = 0;
    document.getElementById('choice-' + side).classList.add('flash-wrong');
    setTimeout(() => {
      document.getElementById('choice-' + correctSide).classList.add('flash-correct');
    }, 160);
    showFeedback('âŒ Wrong!', 'wrong');
    animateItem('fall');
  }

  updateHUD();
  setTimeout(nextItem, 1100);
}

function animateItem(type) {
  const w = document.getElementById('item-emoji-wrap');
  w.className = 'item-emoji-wrap';
  void w.offsetWidth;
  if (type === 'throw-left')  w.classList.add('anim-throw-left');
  if (type === 'throw-right') w.classList.add('anim-throw-right');
  if (type === 'fall')        w.classList.add('anim-fall');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FEEDBACK
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showFeedback(msg, type) {
  const t = document.getElementById('feedback-toast');
  t.textContent = msg;
  t.className   = `feedback-toast ${type} show`;
  clearTimeout(t._tid);
  t._tid = setTimeout(() => t.classList.remove('show'), 800);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOUCH / SWIPE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const gs = document.getElementById('game-screen');

gs.addEventListener('touchstart', e => {
  // Only track swipes originating outside the choice buttons
  if (e.target.closest('.choice-btn')) return;
  touchStartX = e.touches[0].clientX;
  touchStartY = e.touches[0].clientY;
}, { passive: true });

gs.addEventListener('touchmove', e => {
  if (touchStartX === null) return;
  const dx = e.touches[0].clientX - touchStartX;
  const dy = e.touches[0].clientY - touchStartY;
  if (Math.abs(dy) > Math.abs(dx) + 10) return;

  const ol = document.getElementById('dir-left');
  const or = document.getElementById('dir-right');
  const al = document.getElementById('arrow-left');
  const ar = document.getElementById('arrow-right');

  if (dx > 30) {
    or.style.opacity = Math.min(1, dx / 110); ol.style.opacity = 0;
    ar.classList.add('active'); al.classList.remove('active');
  } else if (dx < -30) {
    ol.style.opacity = Math.min(1, -dx / 110); or.style.opacity = 0;
    al.classList.add('active'); ar.classList.remove('active');
  } else {
    ol.style.opacity = or.style.opacity = 0;
    al.classList.remove('active'); ar.classList.remove('active');
  }
}, { passive: true });

gs.addEventListener('touchend', e => {
  if (touchStartX === null) return;
  const dx = e.changedTouches[0].clientX - touchStartX;
  document.getElementById('dir-left').style.opacity  = 0;
  document.getElementById('dir-right').style.opacity = 0;
  document.getElementById('arrow-left').classList.remove('active');
  document.getElementById('arrow-right').classList.remove('active');
  if (dx >  65) choose('right');
  if (dx < -65) choose('left');
  touchStartX = touchStartY = null;
}, { passive: true });

document.addEventListener('keydown', e => {
  if (!document.getElementById('game-screen').classList.contains('active')) return;
  if (e.key === 'ArrowLeft')  choose('left');
  if (e.key === 'ArrowRight') choose('right');
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   END ROUND
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function endRound() {
  stopTimer();
  const correct = results.filter(r => r.correct).length;
  const pct     = correct / ROUND_SIZE;

  const stars = pct >= 0.9 ? 'â­â­â­' : pct >= 0.6 ? 'â­â­' : 'â­';
  let title, emoji;
  if      (pct >= 0.9) { title = 'Outstanding! ğŸ†';    emoji = 'ğŸ‰'; }
  else if (pct >= 0.6) { title = 'Great Job! ğŸ˜„';       emoji = 'ğŸ˜Š'; }
  else                 { title = 'Keep Practising! ğŸ’ª';  emoji = 'ğŸ“–'; }

  document.getElementById('results-emoji').textContent   = emoji;
  document.getElementById('results-title').textContent   = title;
  document.getElementById('stars-row').textContent       = stars;
  document.getElementById('final-score').textContent     = score;
  document.getElementById('final-correct').textContent   = `${correct}/${ROUND_SIZE}`;
  document.getElementById('final-streak').textContent    = bestStreak;

  // Build 2Ã—5 grid
  const grid = document.getElementById('vocab-grid');
  grid.innerHTML = '';
  results.forEach((r, i) => {
    const card = document.createElement('div');
    card.className = `vocab-card ${r.correct ? 'v-correct' : 'v-wrong'}`;
    card.style.animationDelay = (i * 0.055) + 's';
    card.innerHTML = `
      <div class="vocab-card-emoji">${r.item.e}</div>
      <div class="vocab-card-info">
        <div class="vocab-card-name">${r.item.n}</div>
        <div class="vocab-card-cat">${r.item.c}</div>
      </div>
      <div class="vocab-card-result">${r.correct ? 'âœ…' : r.timeout ? 'â°' : 'âŒ'}</div>`;
    grid.appendChild(card);
  });

  showScreen('results-screen');
}
</script>
</body>
</html>
